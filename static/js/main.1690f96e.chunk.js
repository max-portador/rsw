(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l});var a=n(1),r=n.n(a),c=n(4),o=n(60),u=n.n(o).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"0ba318fc-0fe2-47ea-8841-df74f5ee4690"}}),s={getUsers:function(){var e=arguments;return Object(c.a)(r.a.mark(function t(){var n,a,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,a=e.length>1&&void 0!==e[1]?e[1]:25,t.next=4,u.get("users?page=".concat(n,"&count=").concat(a));case 4:return c=t.sent,t.abrupt("return",c.data);case 6:case"end":return t.stop()}},t)}))()},getProfile:function(e){return Object(c.a)(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn("Obsolete method. Please use profileAPI object."),t.abrupt("return",i.getProfile(e));case 2:case"end":return t.stop()}},t)}))()},unfollow:function(e){return Object(c.a)(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.delete("follow/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}))()},follow:function(e){return Object(c.a)(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.post("follow/".concat(e),{});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}))()}},i={getProfile:function(e){return Object(c.a)(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get("profile/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}))()},getStatus:function(e){return Object(c.a)(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.get("profile/status/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}))()},updateStatus:function(e){return Object(c.a)(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.put("profile/status",{status:e});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}},t)}))()}},l={me:function(){return Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("auth/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))()},login:function(e,t){var n=arguments;return Object(c.a)(r.a.mark(function a(){var c,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.length>2&&void 0!==n[2]&&n[2],a.next=3,u.post("/auth/login",{email:e,password:t,rememberMe:c});case 3:return o=a.sent,a.abrupt("return",o.data);case 5:case"end":return a.stop()}},a)}))()},logout:function(){return Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.delete("/auth/login",{});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))()}}},17:function(e,t,n){e.exports={nav:"Nav_nav__3gICw",links:"Nav_links__3Qpxu",active:"Nav_active__XSt-p"}},21:function(e,t,n){e.exports={form:"Login_form__2mvFD",field:"Login_field__2H_jd",checkBoxSection:"Login_checkBoxSection__3VhA8",errorContainer:"Login_errorContainer__3Rfne",btn:"Login_btn__172Gj",error:"Login_error__17Wu6"}},22:function(e,t,n){e.exports={form_control:"FormControl_form_control__DnoA4",error_message:"FormControl_error_message__33E7k",error:"FormControl_error__2AXtT"}},34:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(63),o=n.n(c);t.a=function(e){return r.a.createElement("div",{className:o.a.lds_grid},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}},38:function(e,t,n){e.exports={friend:"FriendItem_friend__1vPsZ",img:"FriendItem_img__1fbQx",name:"FriendItem_name__SKM04"}},41:function(e,t,n){e.exports={header:"Header_header__1VCKf",loginBlock:"Header_loginBlock__6mma5"}},43:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(4),o=n(20),u=n(2),s=n(10),i=function(e,t,n,a){return e.map(function(e){return e[n]===t?Object(u.a)(Object(u.a)({},e),a):e})};n.d(t,"g",function(){return l}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return v}),n.d(t,"c",function(){return b}),n.d(t,"b",function(){return E}),n.d(t,"f",function(){return _});var l="https://cdn-icons-png.flaticon.com/512/126/126486.png",p={users:[],pageSize:25,totalUsersCount:null,currentPage:1,isFetching:!0,followingInProgress:[]},f=function(e){return{type:"FOLLOW",payload:{userId:e}}},d=function(e){return{type:"UNFOLLOW",payload:{userId:e}}},m=function(e){return{type:"SET_CURRENT_PAGE",payload:{currentPage:e}}},g=function(e){return{type:"TOGGLE_IS_FETCHING",payload:{isFetching:e}}},v=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",payload:{isFetching:e,userId:t}}},b=function(e,t){return function(){var n=Object(c.a)(r.a.mark(function n(a){var c;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(g(!0)),a(m(e)),n.next=4,s.c.getUsers(e,t);case 4:c=n.sent,a(g(!1)),a({type:"SET_USERS",payload:{users:c.items}}),a({type:"SET_TOTAL_USERS_COUNT",payload:{totalUsersCount:c.totalCount}});case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},h=function(){var e=Object(c.a)(r.a.mark(function e(t,n,a,c){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(v(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(c(n)),t(v(!1,n));case 6:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),E=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h(n,e,s.c.follow.bind(s.c),f);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:h(n,e,s.c.unfollow.bind(s.c),d);case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(u.a)(Object(u.a)({},e),{},{users:i(e.users,t.payload.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(u.a)(Object(u.a)({},e),{},{users:i(e.users,t.payload.userId,"id",{followed:!1})});case"SET_USERS":return Object(u.a)(Object(u.a)({},e),{},{users:Object(o.a)(t.payload.users)});case"SET_CURRENT_PAGE":return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.payload.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(u.a)(Object(u.a)({},e),{},{totalUsersCount:t.payload.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.payload.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":var n;return n=t.payload.isFetching?[].concat(Object(o.a)(e.followingInProgress),[t.payload.userId]):e.followingInProgress.filter(function(e){return e!==t.payload.userId}),Object(u.a)(Object(u.a)({},e),{},{followingInProgress:n});default:return e}}},44:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return m});var a=n(1),r=n.n(a),c=n(4),o=n(20),u=n(2),s=n(10),i={profile:null,status:null,posts:[{id:1,message:"post1",likesCount:0},{id:2,message:"post2",likesCount:23},{id:3,message:"post3",likesCount:12},{id:4,message:"post4",likesCount:108}]},l=function(e){return{type:"ADD_POST",payload:{newPostText:e}}},p=function(e){return{type:"SET_STATUS",payload:{status:e}}},f=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.getProfile(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",payload:{profile:a}});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.getStatus(e);case 2:a=t.sent,n(p(a));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(r.a.mark(function t(n){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(p(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:e.posts.length+1,message:t.payload.newPostText,likesCount:0};return Object(u.a)(Object(u.a)({},e),{},{posts:[].concat(Object(o.a)(e.posts),[n])});case"DELETE_POST":var a=t.payload.post_id;return Object(u.a)(Object(u.a)({},e),{},{posts:Object(o.a)(e.posts.filter(function(e){return e.id!==a}))});case"SET_USER_PROFILE":return Object(u.a)(Object(u.a)({},e),{},{profile:t.payload.profile});case"SET_STATUS":return Object(u.a)(Object(u.a)({},e),{},{status:t.payload.status});default:return e}}},56:function(e,t,n){"use strict";n.d(t,"b",function(){return o});var a=n(20),r=n(2),c={dialogs:[{id:1,name:"Max"},{id:2,name:"Alex"},{id:3,name:"Igor"},{id:4,name:"Julia"}],messages:[{message:"Hi"},{message:"How is your life"},{message:"Yo"},{message:"Hold me tight"}]},o=function(e){return{type:"SEND_MESSAGE",payload:{newMessageText:e}}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":var n=t.payload.newMessageText;return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(a.a)(e.messages),[{message:n}])});default:return e}}},58:function(e,t,n){e.exports={list:"FriendsList_list__3OFEK"}},63:function(e,t,n){e.exports={lds_grid:"PreLoader_lds_grid__3ZajR"}},65:function(e,t,n){e.exports=n(96)},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),o=n.n(c),u=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,113)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)})},s=n(28),i=n(29),l=n(31),p=n(30),f=n(5),d=n(14),m=n(15),g=n(24),v=n(58),b=n.n(v),h=n(38),E=n.n(h),_=function(e){return r.a.createElement("div",{className:E.a.friend},r.a.createElement("img",{className:E.a.img,src:e.image,alt:"FriendIcon"}),r.a.createElement("span",{className:E.a.name},e.name))},O=function(e){return r.a.createElement("div",{className:b.a.list},e.friends.map(function(e,t){return r.a.createElement(_,{name:e.name,image:e.image,key:t})}))},w=n(17),j=n.n(w),y=function(e){return r.a.createElement("nav",{className:j.a.nav},r.a.createElement("div",{className:j.a.links},r.a.createElement(d.b,{to:"/profile",activeClassName:j.a.active},"Profile"),r.a.createElement(d.b,{to:"/dialogs",activeClassName:j.a.active},"Messages"),r.a.createElement(d.b,{to:"/users",activeClassName:j.a.active},"Users"),r.a.createElement(d.b,{to:"/news",activeClassName:j.a.active},"News"),r.a.createElement(d.b,{to:"/music",activeClassName:j.a.active},"Music"),r.a.createElement(d.b,{to:"/settings",activeClassName:j.a.active},"Settings")),r.a.createElement(O,{friends:e.friends}))},S=Object(m.b)(function(e){return{friends:e.sideBar.friends}},null)(y),x=n(41),k=n.n(x),C=function(e){return r.a.createElement("header",{className:k.a.header},r.a.createElement("img",{src:"https://img.icons8.com/nolan/50/venn-diagram.png",alt:"header logo"}),r.a.createElement("div",{className:k.a.loginBlock},e.isAuth?r.a.createElement("span",null,e.login," -",r.a.createElement("button",{onClick:e.authLogout},"Logout")):r.a.createElement(d.b,{to:"/login"},"Login")))},T=n(1),I=n.n(T),N=n(4),L=n(2),A=n(10),P={userId:null,email:null,login:null,isAuth:!1},F=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:a}}},R=function(){return function(){var e=Object(N.a)(I.a.mark(function e(t){var n,a,r,c,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.me();case 2:0===(n=e.sent).resultCode&&(a=n.data,r=a.id,c=a.login,o=a.email,t(F(r,o,c,!0)));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(L.a)(Object(L.a)({},e),t.payload);default:return e}},G=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(C,this.props)}}]),n}(r.a.Component),D=Object(m.b)(function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}},{authLogout:function(){return function(){var e=Object(N.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.logout();case 2:0===e.sent.resultCode&&t(F(null,null,null,!1));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(G),M=n(26),z=n(25),B=n(22),H=n.n(B),W=["field","form"],Z=function(e){var t=e.field,n=e.form,a=Object(M.a)(e,W),c=t.name,o=n.errors[c]&&n.touched[c];return r.a.createElement("div",{className:H.a.form_control+" "+(o&&H.a.error)},r.a.createElement("div",null,r.a.createElement("input",Object(L.a)(Object(L.a)({},a),t))),o&&r.a.createElement("span",{className:H.a.error_message},n.errors[c]))},V=n(21),J=n.n(V),K=["isAuth"],q=function(e){var t=e.authUserLogin,n=e.email,a=e.password;return r.a.createElement("div",null,r.a.createElement(z.c,{initialValues:{email:n,password:a,rememberMe:!1},onSubmit:function(e,n){var a=n.setFieldValue;console.log(e),t(e.email,e.password,e.rememberMe,a)},validate:function(e){var t=e.email,n=e.password,a={},r=function(e){var t;return e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(t="Invalid email address"):t="Required",t}(t);r&&(a.email=r);var c=function(e){var t;return e?/[0-9]{2,4}$/i.test(e)?e.length<8&&(t="Password is too short. Minimum 8 characters required"):t="Password should contain 2 digits":t="Required",t}(n);return c&&(a.password=c),a}},function(e){var t=e.values;return r.a.createElement(z.b,{className:J.a.form},r.a.createElement("h1",null,"Login"),r.a.createElement(z.a,{name:"email",id:"email",component:Z,type:"email",className:J.a.field,placeholder:"email"}),r.a.createElement(z.a,{name:"password",component:Z,type:"password",placeholder:"password",className:J.a.field}),r.a.createElement("div",{className:J.a.checkBoxSection},r.a.createElement(z.a,{name:"rememberMe",component:"input",type:"checkbox"}),r.a.createElement("label",null,"Remember")),r.a.createElement("div",{className:J.a.errorContainer},t.general?r.a.createElement("span",{className:J.a.error},t.general):null),r.a.createElement("button",{type:"submit",className:J.a.btn},"Login"))}))},Q=Object(m.b)(function(e){return{email:e.auth.email||"",password:e.auth.password||"",isAuth:e.auth.isAuth}},{authUserLogin:function(e,t,n,a){return function(){var r=Object(N.a)(I.a.mark(function r(c){var o;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A.a.login(e,t,n);case 2:0===(o=r.sent).resultCode?c(R()):a("general",o.messages.join(" "));case 4:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()}})(function(e){var t=e.isAuth,n=Object(M.a)(e,K);return t?r.a.createElement(f.Redirect,{to:"/profile"}):r.a.createElement(q,n)}),X=n(34),Y={initialized:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;switch((arguments.length>1?arguments[1]:void 0).type){case"INITIALIZED_SUCCESS":return Object(L.a)(Object(L.a)({},e),{},{initialized:!0});default:return e}},ee=n(64),te=n(44),ne=n(56),ae="https://www.pinclipart.com/picdir/big/200-2008697_account-customer-login-man-user-icon-login-icon.png",re={friends:[{name:"Maks",image:ae},{name:"Igor",image:ae},{name:"Julia",image:ae},{name:"Maria",image:ae},{name:"Victor",image:ae},{name:"Roman",image:ae}]},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;arguments.length>1&&arguments[1];return e},oe=n(43),ue=Object(g.b)({profilePage:te.b,messagesPage:ne.a,sideBar:ce,usersPage:oe.a,auth:U,app:$}),se=Object(g.d)(ue,Object(g.a)(ee.a)),ie=(n(94),function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(X.a,null)},r.a.createElement(e,t))}}),le=r.a.lazy(function(){return n.e(5).then(n.bind(null,116))}),pe=r.a.lazy(function(){return n.e(3).then(n.bind(null,115))}),fe=r.a.lazy(function(){return n.e(4).then(n.bind(null,114))}),de=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(D,null),r.a.createElement(S,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(f.Route,{path:"/dialogs*",component:ie(le)}),r.a.createElement(f.Route,{path:"/login",component:Q}),r.a.createElement(f.Route,{path:"/profile/:userId?",component:ie(pe)}),r.a.createElement(f.Route,{path:"/users",component:ie(fe)}))):r.a.createElement(X.a,null)}}]),n}(r.a.Component),me=Object(g.c)(f.withRouter,Object(m.b)(function(e){return{initialized:e.app.initialized}},{getAuthUserData:R,initializeApp:function(){return function(){var e=Object(N.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(R());case 2:t({type:"INITIALIZED_SUCCESS"});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}))(de),ge=function(e){return r.a.createElement(d.a,null,r.a.createElement(m.a,{store:se},r.a.createElement(me,null)))};n(95);o.a.render(r.a.createElement(ge,null),document.getElementById("root")),u()}},[[65,1,2]]]);
//# sourceMappingURL=main.1690f96e.chunk.js.map